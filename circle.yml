machine:
  environment:
    FILENAME: report

dependencies:
  cache_directories:
    - "~/.apt-cache"
  pre:
    - |
      sudo rm -rf /var/cache/apt/archives && \
      sudo ln -s ~/.apt-cache /var/cache/apt/archives && \
      mkdir -p ~/.apt-cache/partial
  override:
    - sudo apt-get update
    - sudo apt-get install -y texlive texlive-xetex texlive-latex-extra pandoc lmodern

test:
  override:
    - |
      pdflatex -file-line-error -interaction=nonstopmode -synctex=1 "$FILENAME.tex"
      cp -r "$FILENAME.pdf" $CIRCLE_ARTIFACTS/
